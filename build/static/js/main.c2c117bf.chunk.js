(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(10),u=n.n(s),i=n(11),o=n(12),l=n(14),c=n(13),m=n(15),f=n(2),d=n.n(f),p="/api/persons",h={getAll:function(){return d.a.get(p).then(function(e){return e.data})},create:function(e){return d.a.post(p,e).then(function(e){return e.data})},update:function(e,t){return d.a.put("".concat(p,"/").concat(e),t).then(function(e){return e.data})},remove:function(e){return d.a.delete("".concat(p,"/").concat(e)).then(function(e){return e.data})}},v=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},w=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).lisaaNimi=function(e){if(e.preventDefault(),n.state.persons.some(function(e){return e.name===n.state.newName})){if(window.confirm(n.state.newName+" on jo luettelossa, korvataanko vanha numero uudella")){var t={name:n.state.newName,number:n.state.newNumber},a=n.state.persons.filter(function(e){return e.name===n.state.newName}),r=a[0].id;h.update(r,t).then(function(e){var t=n.state.persons.filter(function(e){return e.id!==r});n.setState({persons:t.concat(e),message:"muutettiin "+n.state.newName,newNumber:"",newName:""})}).catch(function(e){n.setState({message:"Henkil\xf6 "+a[0].name+" on jo poistettu palvelimelta."}),n.setState({persons:n.state.persons.filter(function(e){return e.id!==r})})}),setTimeout(function(){n.setState({message:null})},3e3)}}else{var s={name:n.state.newName,number:n.state.newNumber};h.create(s).then(function(e){n.setState({persons:n.state.persons.concat(e),message:"lis\xe4ttiin "+n.state.newName,newName:"",newNumber:""})}),setTimeout(function(){n.setState({message:null})},3e3)}},n.handleNimiChange=function(e){n.setState({newName:e.target.value})},n.handleNumeroChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.deletePerson=function(e){return function(){if(window.confirm("Haluatko varmasti poistaa numeron?")){h.remove(e);var t=n.state.persons.filter(function(t){return t.id===e});n.setState({persons:n.state.persons.filter(function(t){return t.id!==e})}),n.setState({message:"Poistettiin "+t[0].name}),setTimeout(function(){n.setState({message:null})},3e3)}}},n.state={persons:[],newName:"",newNumber:"",filter:"",message:null},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.getAll().then(function(t){console.log(t),e.setState({persons:t})})}},{key:"filtering",value:function(){var e=this;return this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(v,{message:this.state.message}),r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:this.state.filter,onChange:this.handleFilterChange})),r.a.createElement(E,{kayttaja:this}),r.a.createElement(g,{persons:this.filtering(),deletePerson:this.deletePerson}))}}]),t}(r.a.Component),g=function(e){var t=e.persons,n=e.deletePerson;return r.a.createElement("div",null,r.a.createElement("h2",null,"Numerot"),t.map(function(e){return r.a.createElement(N,{key:e.id,person:e,deletePerson:n(e.id)})}))},N=function(e){var t=e.person,n=e.deletePerson;return r.a.createElement("div",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:n},"poista"))},E=function(e){var t=e.kayttaja;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t.lisaaNimi},r.a.createElement("h2",null,"Lis\xe4\xe4 uusi/muuta olemassa olevaa numeroa"),r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t.state.newName,onChange:t.handleNimiChange})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:t.state.newNumber,onChange:t.handleNumeroChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},b=w;n(40);u.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.c2c117bf.chunk.js.map