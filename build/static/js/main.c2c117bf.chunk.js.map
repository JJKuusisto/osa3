{"version":3,"sources":["services/persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","services_persons","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","concat","remove","delete","Notification","_ref","message","react_default","a","createElement","className","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","lisaaNimi","event","preventDefault","state","persons","some","e","name","newName","window","confirm","personObject","number","newNumber","muutettava","filter","p","personService","setState","catch","error","setTimeout","newPerson","handleNimiChange","target","value","handleNumeroChange","handleFilterChange","deletePerson","poistettava","_this2","console","log","_this3","toLowerCase","includes","components_Notification","onChange","App_UusiKayttaja","kayttaja","App_Numerot","filtering","React","Component","Numerot","map","App_Person","key","person","Person","_ref2","onClick","UusiKayttaja","_ref3","onSubmit","type","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c2c117bf.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className=\"notification\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import React from 'react';\r\nimport personService from './services/persons'\r\nimport Notification from  './components/Notification'\r\n\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      persons: [],\r\n      newName: '',\r\n      newNumber: '',\r\n      filter: '',\r\n      message: null\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    personService\r\n      .getAll()\r\n      .then(response=> {\r\n        console.log(response)\r\n        this.setState({persons: response})\r\n      })\r\n  }\r\n\r\n  lisaaNimi = (event) => {\r\n    event.preventDefault()\r\n    if(this.state.persons.some(e => e.name === this.state.newName)){\r\n      if(window.confirm(this.state.newName + \" on jo luettelossa, korvataanko vanha numero uudella\")){\r\n        const personObject = {\r\n          name: this.state.newName,\r\n          number: this.state.newNumber,\r\n          \r\n        }\r\n        var muutettava = this.state.persons.filter(p => p.name === this.state.newName)\r\n        const id = muutettava[0].id\r\n        personService\r\n          .update(id, personObject)\r\n          .then(personObject =>{\r\n            const persons = this.state.persons.filter(p => p.id !== id)\r\n            this.setState({\r\n              persons : persons.concat(personObject),\r\n              message: \"muutettiin \" + this.state.newName,\r\n              newNumber: '',\r\n              newName: ''\r\n            })\r\n          })\r\n          .catch(error => {\r\n            this.setState({message: \"Henkilö \" + muutettava[0].name + \" on jo poistettu palvelimelta.\"})\r\n            this.setState({persons: this.state.persons.filter(p => p.id !== id)})\r\n          })\r\n          setTimeout(() => {\r\n            this.setState({message: null})\r\n          }, 3000)\r\n      }\r\n    } else {\r\n        const personObject = {\r\n          name: this.state.newName,\r\n          number: this.state.newNumber\r\n        }\r\n    \r\n        personService\r\n          .create(personObject)\r\n          .then(newPerson =>{\r\n            this.setState({\r\n              persons: this.state.persons.concat(newPerson),\r\n              message: \"lisättiin \" + this.state.newName,\r\n              newName: '',\r\n              newNumber: ''\r\n            })\r\n          })\r\n          setTimeout(() => {\r\n            this.setState({message: null})\r\n          }, 3000)\r\n\r\n          \r\n      }\r\n    \r\n   \r\n  }\r\n\r\n  handleNimiChange = (event) => {\r\n    this.setState({newName: event.target.value})\r\n  }\r\n\r\n  handleNumeroChange = (event) => {\r\n    this.setState({newNumber: event.target.value})\r\n  }\r\n\r\n  filtering () {\r\n    var valitut = this.state.persons.filter(p => p.name.toLowerCase().includes(this.state.filter.toLowerCase()))\r\n    return (\r\n      valitut\r\n    )\r\n  }\r\n\r\n  handleFilterChange = (event) => {\r\n    this.setState({filter: event.target.value})\r\n    }\r\n  \r\n  deletePerson = (id) => {\r\n    return () => {\r\n      if(window.confirm(\"Haluatko varmasti poistaa numeron?\")){\r\n        personService\r\n          .remove(id)\r\n          var poistettava = this.state.persons.filter(p => p.id===id)\r\n          this.setState({persons: this.state.persons.filter(p => p.id !== id)})\r\n          this.setState({message: \"Poistettiin \" + poistettava[0].name})\r\n          setTimeout(() => {\r\n            this.setState({message: null})\r\n          }, 3000)\r\n      }\r\n    }\r\n\r\n  \r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Puhelinluettelo</h2>\r\n        <Notification message={this.state.message} />\r\n        <div>\r\n            rajaa näytettäviä: <input \r\n            value={this.state.filter}\r\n            onChange={this.handleFilterChange}\r\n            />\r\n          </div>\r\n        \r\n        <UusiKayttaja kayttaja={this}/>\r\n        <Numerot persons={this.filtering()} deletePerson={this.deletePerson} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst Numerot = ({persons, deletePerson}) => {\r\n  return (\r\n    <div>\r\n      <h2>Numerot</h2>\r\n      {persons.map(p => \r\n        <Person \r\n          key={p.id}\r\n          person={p}\r\n          deletePerson={deletePerson(p.id)}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Person = ({person, deletePerson}) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number} <button onClick={deletePerson}>poista</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst UusiKayttaja = ({kayttaja}) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={kayttaja.lisaaNimi}>\r\n         \r\n         <h2>Lisää uusi/muuta olemassa olevaa numeroa</h2>\r\n         <div>\r\n           nimi: <input \r\n           value={kayttaja.state.newName}\r\n           onChange={kayttaja.handleNimiChange}\r\n            />\r\n         </div>\r\n         <div>\r\n           numero: <input \r\n           value={kayttaja.state.newNumber}\r\n           onChange={kayttaja.handleNumeroChange}\r\n           />\r\n         </div>\r\n         <div>\r\n           <button type=\"submit\">lisää</button>\r\n         </div>\r\n       </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n\n  \n\n\n\n\n"],"sourceRoot":""}